<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laboratorio: Dashboard Interactivo en Tableau - Sesion 11</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Segoe UI', system-ui, sans-serif; }
    </style>
</head>
<body class="bg-gradient-to-br from-orange-50 to-amber-100 min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const labSteps = [
            {
                id: 1,
                title: 'Contexto y Dataset',
                duration: '10 min',
                icon: 'üìã',
                content: {
                    description: `MegaRetail Panama tiene datos de 3 a√±os de ventas que necesitan visualizar.
                    El equipo de gerencia quiere un dashboard interactivo que les permita explorar tendencias,
                    comparar regiones y analizar productos.`,
                    dataset: {
                        name: 'Sample - Superstore (incluido en Tableau)',
                        tables: ['Orders', 'People', 'Returns'],
                        rows: '~10,000 ordenes'
                    },
                    deliverables: [
                        'Dashboard ejecutivo de 1 pagina',
                        '4+ visualizaciones interconectadas',
                        'Filtros y parametros funcionales',
                        'Al menos 2 acciones de dashboard'
                    ]
                }
            },
            {
                id: 2,
                title: 'Conectar y Explorar Datos',
                duration: '15 min',
                icon: 'üîó',
                content: {
                    steps: [
                        'Abrir Tableau Desktop',
                        'Connect ‚Üí Saved Data Sources ‚Üí Sample - Superstore',
                        'Explorar las 3 tablas y sus relaciones',
                        'Verificar tipos de datos (fecha, numero, string)',
                        'Crear Extract para mejor performance'
                    ],
                    exploration: [
                        'Revisar dimension Order Date (granularidad)',
                        'Identificar jerarquias: Region ‚Üí State ‚Üí City',
                        'Entender metricas: Sales, Profit, Quantity, Discount'
                    ],
                    tips: [
                        'Renombrar campos confusos desde el inicio',
                        'Crear carpetas para organizar dimensiones',
                        'Ocultar campos que no usaras'
                    ]
                }
            },
            {
                id: 3,
                title: 'Crear Campos Calculados',
                duration: '20 min',
                icon: 'üßÆ',
                content: {
                    calculations: [
                        {
                            name: 'Profit Ratio',
                            formula: 'SUM([Profit]) / SUM([Sales])',
                            purpose: 'Margen de ganancia'
                        },
                        {
                            name: 'Sales YoY Growth',
                            formula: '(SUM([Sales]) - LOOKUP(SUM([Sales]), -1)) / ABS(LOOKUP(SUM([Sales]), -1))',
                            purpose: 'Crecimiento vs a√±o anterior'
                        },
                        {
                            name: 'Profit Status',
                            formula: 'IF [Profit] > 0 THEN "Profitable" ELSE "Loss" END',
                            purpose: 'Clasificar ordenes'
                        },
                        {
                            name: 'Days to Ship',
                            formula: 'DATEDIFF("day", [Order Date], [Ship Date])',
                            purpose: 'Tiempo de envio'
                        },
                        {
                            name: 'Sales per Order',
                            formula: '{FIXED [Order ID] : SUM([Sales])}',
                            purpose: 'LOD: Valor total por orden'
                        }
                    ],
                    howTo: 'Analysis ‚Üí Create Calculated Field ‚Üí escribir formula'
                }
            },
            {
                id: 4,
                title: 'Visualizacion 1: KPI Cards',
                duration: '15 min',
                icon: 'üìä',
                content: {
                    objective: 'Crear 4 tarjetas de KPIs principales',
                    kpis: [
                        { name: 'Total Sales', format: 'Currency', color: 'Blue' },
                        { name: 'Total Profit', format: 'Currency', color: 'Green/Red' },
                        { name: 'Profit Ratio', format: 'Percentage', color: 'Gradient' },
                        { name: 'Total Orders', format: 'Number', color: 'Gray' }
                    ],
                    steps: [
                        'Nueva hoja: Doble click en SUM(Sales)',
                        'Marks ‚Üí Text, tama√±o grande',
                        'Format ‚Üí aumentar fuente a 36pt',
                        'Agregar comparacion: calcular vs a√±o anterior',
                        'Repetir para cada KPI'
                    ],
                    tips: [
                        'Usar BANs (Big A** Numbers)',
                        'Incluir flecha de tendencia (‚ñ≤‚ñº)',
                        'Color condicional: verde si positivo'
                    ]
                }
            },
            {
                id: 5,
                title: 'Visualizacion 2: Trend Line',
                duration: '15 min',
                icon: 'üìà',
                content: {
                    objective: 'Grafico de linea con tendencia de ventas mensuales',
                    config: {
                        columns: 'MONTH(Order Date)',
                        rows: 'SUM(Sales)',
                        color: 'YEAR(Order Date)',
                        labels: 'Ultimo punto de cada linea'
                    },
                    steps: [
                        'Columns: Order Date (Month)',
                        'Rows: SUM(Sales)',
                        'Color: YEAR(Order Date)',
                        'Click derecho en eje ‚Üí Add Reference Line ‚Üí Trend',
                        'Analytics pane ‚Üí arrastrar Trend Line'
                    ],
                    enhancements: [
                        'Agregar area sombreada para meta',
                        'Highlight a√±o actual',
                        'Tooltip con detalle mensual'
                    ]
                }
            },
            {
                id: 6,
                title: 'Visualizacion 3: Region Comparison',
                duration: '15 min',
                icon: 'üó∫Ô∏è',
                content: {
                    objective: 'Comparar performance por region',
                    options: [
                        { type: 'Bar Chart', config: 'Rows: Region, Columns: SUM(Sales), Color: Profit Ratio' },
                        { type: 'Map', config: 'Marks: State, Size: Sales, Color: Profit' },
                        { type: 'Treemap', config: 'Size: Sales, Color: Profit Ratio, Label: Region > State' }
                    ],
                    steps: [
                        'Elegir tipo de visualizacion',
                        'Rows: Region (ordenar por Sales desc)',
                        'Columns: SUM(Sales)',
                        'Color: Profit Ratio (divergente)',
                        'Label: mostrar valor',
                        'Sort: por SUM(Sales) descendente'
                    ],
                    tips: [
                        'Barras horizontales para muchas categorias',
                        'Ordenar de mayor a menor',
                        'Resaltar top/bottom con color'
                    ]
                }
            },
            {
                id: 7,
                title: 'Visualizacion 4: Product Analysis',
                duration: '15 min',
                icon: 'üì¶',
                content: {
                    objective: 'Analisis de productos top y bottom',
                    config: {
                        type: 'Scatter Plot o Bar Chart',
                        metrics: ['Sales', 'Profit', 'Quantity']
                    },
                    steps: [
                        'Crear parametro: Top N (Integer, Range 5-20, Default 10)',
                        'Crear calculo: Rank = RANK(SUM([Sales]))',
                        'Filtrar: Rank <= [Top N Parameter]',
                        'Mostrar control de parametro',
                        'Agregar Sub-Category como detalle'
                    ],
                    dynamic: [
                        'Parametro permite al usuario elegir cuantos items ver',
                        'Incluir toggle para ver Top vs Bottom',
                        'Agregar busqueda de producto especifico'
                    ]
                }
            },
            {
                id: 8,
                title: 'Crear Dashboard',
                duration: '20 min',
                icon: 'üé®',
                content: {
                    layout: {
                        size: '1200 x 800 pixels (Fixed)',
                        structure: [
                            'Header: Titulo + Filtros (altura: 60px)',
                            'Row 1: 4 KPI Cards (altura: 100px)',
                            'Row 2: Trend + Region (altura: 300px, 50/50)',
                            'Row 3: Products (altura: 300px)'
                        ]
                    },
                    steps: [
                        'Dashboard ‚Üí New Dashboard',
                        'Size: Fixed, 1200 x 800',
                        'Arrastrar Horizontal Container para header',
                        'Arrastrar hojas en orden',
                        'Ajustar tama√±os y padding',
                        'Agregar titulo y logo (Image object)'
                    ],
                    formatting: [
                        'Eliminar titulos de hojas redundantes',
                        'Ocultar Sheet Tabs en dashboard',
                        'Aplicar color de fondo consistente',
                        'Alinear elementos con Distribute'
                    ]
                }
            },
            {
                id: 9,
                title: 'Agregar Interactividad',
                duration: '20 min',
                icon: 'üñ±Ô∏è',
                content: {
                    filters: [
                        { name: 'Year', type: 'Single Value Dropdown', apply: 'All sheets' },
                        { name: 'Region', type: 'Multi-select', apply: 'All sheets' },
                        { name: 'Category', type: 'Single Value List', apply: 'Products sheet' }
                    ],
                    actions: [
                        {
                            name: 'Filter by Region',
                            type: 'Filter',
                            source: 'Region chart',
                            target: 'All other sheets',
                            trigger: 'Select'
                        },
                        {
                            name: 'Highlight Category',
                            type: 'Highlight',
                            source: 'Products chart',
                            target: 'Trend chart',
                            trigger: 'Hover'
                        }
                    ],
                    steps: [
                        'Agregar filtros: Click en dropdown de hoja ‚Üí Filters',
                        'Dashboard ‚Üí Actions ‚Üí Add Filter Action',
                        'Configurar Source, Target, Trigger',
                        'Probar interaccion'
                    ]
                }
            },
            {
                id: 10,
                title: 'Publicar y Compartir',
                duration: '10 min',
                icon: 'üì§',
                content: {
                    options: [
                        {
                            platform: 'Tableau Public',
                            steps: ['Server ‚Üí Tableau Public ‚Üí Save to Tableau Public', 'Crear cuenta gratis', 'Publicar'],
                            pros: 'Gratis, facil de compartir',
                            cons: 'Publico, sin datos sensibles'
                        },
                        {
                            platform: 'Export Image/PDF',
                            steps: ['Dashboard ‚Üí Export ‚Üí Image/PDF'],
                            pros: 'Estatico, facil distribuir',
                            cons: 'Sin interactividad'
                        },
                        {
                            platform: 'Packaged Workbook (.twbx)',
                            steps: ['File ‚Üí Export Packaged Workbook'],
                            pros: 'Incluye datos, portable',
                            cons: 'Requiere Tableau para abrir'
                        }
                    ],
                    deliverable: 'Dashboard publicado en Tableau Public con URL compartible'
                }
            }
        ];

        function App() {
            const [currentStep, setCurrentStep] = useState(1);
            const [completedSteps, setCompletedSteps] = useState([]);

            const currentStepData = labSteps.find(s => s.id === currentStep);
            const progress = (completedSteps.length / labSteps.length) * 100;

            const markCompleted = (stepId) => {
                if (!completedSteps.includes(stepId)) {
                    setCompletedSteps([...completedSteps, stepId]);
                }
            };

            return (
                <div className="max-w-5xl mx-auto p-6">
                    {/* Header */}
                    <div className="bg-gradient-to-r from-orange-500 to-amber-500 text-white p-6 rounded-xl shadow-lg mb-6">
                        <div className="flex items-center gap-2 text-orange-100 mb-2">
                            <a href="../" className="hover:text-white">‚Üê Inicio</a>
                            <span>/</span>
                            <a href="index.html" className="hover:text-white">Sesion 11</a>
                        </div>
                        <h1 className="text-2xl font-bold mb-2">Laboratorio: Dashboard Interactivo en Tableau</h1>
                        <p className="text-orange-100">Construye un dashboard completo con Sample Superstore</p>
                        <div className="mt-4 flex items-center gap-4">
                            <span className="bg-orange-400 px-3 py-1 rounded-full text-sm">Tableau Desktop</span>
                            <span className="bg-orange-400 px-3 py-1 rounded-full text-sm">Sample Superstore</span>
                            <span className="bg-orange-400 px-3 py-1 rounded-full text-sm">~2.5 horas</span>
                        </div>
                    </div>

                    {/* Progress */}
                    <div className="bg-white rounded-xl p-4 shadow mb-6">
                        <div className="flex justify-between text-sm text-gray-600 mb-2">
                            <span>Progreso del laboratorio</span>
                            <span>{completedSteps.length}/{labSteps.length} pasos</span>
                        </div>
                        <div className="h-3 bg-gray-200 rounded-full overflow-hidden">
                            <div
                                className="h-full bg-gradient-to-r from-orange-500 to-amber-500 transition-all duration-500"
                                style={{ width: `${progress}%` }}
                            />
                        </div>
                    </div>

                    <div className="grid lg:grid-cols-4 gap-6">
                        {/* Steps sidebar */}
                        <div className="lg:col-span-1">
                            <div className="bg-white rounded-xl shadow p-4 max-h-[600px] overflow-y-auto">
                                <h3 className="font-bold text-gray-800 mb-3">Pasos</h3>
                                <div className="space-y-2">
                                    {labSteps.map(step => (
                                        <button
                                            key={step.id}
                                            onClick={() => setCurrentStep(step.id)}
                                            className={`w-full text-left p-2 rounded-lg transition-all ${
                                                currentStep === step.id
                                                    ? 'bg-orange-100 border-2 border-orange-500'
                                                    : completedSteps.includes(step.id)
                                                    ? 'bg-green-50 border border-green-300'
                                                    : 'bg-gray-50 hover:bg-gray-100'
                                            }`}
                                        >
                                            <div className="flex items-center gap-2">
                                                <span className="text-lg">{step.icon}</span>
                                                <div className="flex-1 min-w-0">
                                                    <div className="text-xs font-medium truncate">{step.title}</div>
                                                    <div className="text-xs text-gray-500">{step.duration}</div>
                                                </div>
                                                {completedSteps.includes(step.id) && (
                                                    <span className="text-green-500 text-sm">‚úì</span>
                                                )}
                                            </div>
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>

                        {/* Main content */}
                        <div className="lg:col-span-3">
                            <div className="bg-white rounded-xl shadow-lg p-6">
                                <div className="flex items-center gap-3 mb-4">
                                    <span className="text-3xl">{currentStepData.icon}</span>
                                    <div>
                                        <h2 className="text-xl font-bold text-gray-800">
                                            Paso {currentStep}: {currentStepData.title}
                                        </h2>
                                        <span className="text-sm text-gray-500">{currentStepData.duration}</span>
                                    </div>
                                </div>

                                {/* Dynamic content based on step */}
                                <div className="space-y-4">
                                    {currentStep === 1 && (
                                        <>
                                            <div className="bg-orange-50 p-4 rounded-lg">
                                                <p className="text-gray-700">{currentStepData.content.description}</p>
                                            </div>
                                            <div className="border rounded-lg p-4">
                                                <h4 className="font-bold mb-2">Dataset</h4>
                                                <p className="text-sm text-gray-600">{currentStepData.content.dataset.name}</p>
                                                <p className="text-sm text-gray-600">{currentStepData.content.dataset.rows}</p>
                                            </div>
                                            <div className="bg-green-50 p-4 rounded-lg">
                                                <h4 className="font-bold text-green-800 mb-2">Entregables</h4>
                                                <ul className="text-sm text-gray-700 space-y-1">
                                                    {currentStepData.content.deliverables.map((d, i) => (
                                                        <li key={i}>‚Ä¢ {d}</li>
                                                    ))}
                                                </ul>
                                            </div>
                                        </>
                                    )}

                                    {currentStep === 2 && (
                                        <>
                                            <div className="border rounded-lg p-4">
                                                <h4 className="font-bold mb-2">Pasos</h4>
                                                <ol className="text-sm text-gray-700 space-y-1">
                                                    {currentStepData.content.steps.map((s, i) => (
                                                        <li key={i}>{i+1}. {s}</li>
                                                    ))}
                                                </ol>
                                            </div>
                                            <div className="bg-blue-50 p-4 rounded-lg">
                                                <h4 className="font-bold text-blue-800 mb-2">Explorar</h4>
                                                <ul className="text-sm text-gray-700 space-y-1">
                                                    {currentStepData.content.exploration.map((e, i) => (
                                                        <li key={i}>‚Ä¢ {e}</li>
                                                    ))}
                                                </ul>
                                            </div>
                                        </>
                                    )}

                                    {currentStep === 3 && (
                                        <>
                                            <div className="bg-orange-50 p-4 rounded-lg">
                                                <p className="text-sm text-gray-600">{currentStepData.content.howTo}</p>
                                            </div>
                                            <div className="space-y-3">
                                                {currentStepData.content.calculations.map((calc, i) => (
                                                    <div key={i} className="border rounded-lg p-4">
                                                        <div className="flex justify-between items-start mb-2">
                                                            <h5 className="font-bold">{calc.name}</h5>
                                                            <span className="text-xs bg-gray-200 px-2 py-0.5 rounded">{calc.purpose}</span>
                                                        </div>
                                                        <code className="text-sm bg-gray-900 text-green-400 p-2 rounded block overflow-x-auto">
                                                            {calc.formula}
                                                        </code>
                                                    </div>
                                                ))}
                                            </div>
                                        </>
                                    )}

                                    {(currentStep >= 4 && currentStep <= 7) && (
                                        <>
                                            <div className="bg-orange-50 p-4 rounded-lg">
                                                <h4 className="font-bold text-orange-800">Objetivo</h4>
                                                <p className="text-gray-700">{currentStepData.content.objective}</p>
                                            </div>
                                            <div className="border rounded-lg p-4">
                                                <h4 className="font-bold mb-2">Pasos</h4>
                                                <ol className="text-sm text-gray-700 space-y-1">
                                                    {currentStepData.content.steps.map((s, i) => (
                                                        <li key={i}>{i+1}. {s}</li>
                                                    ))}
                                                </ol>
                                            </div>
                                            {currentStepData.content.tips && (
                                                <div className="bg-amber-50 p-4 rounded-lg">
                                                    <h4 className="font-bold text-amber-800 mb-2">Tips</h4>
                                                    <ul className="text-sm text-gray-700 space-y-1">
                                                        {currentStepData.content.tips.map((t, i) => (
                                                            <li key={i}>‚Ä¢ {t}</li>
                                                        ))}
                                                    </ul>
                                                </div>
                                            )}
                                        </>
                                    )}

                                    {currentStep === 8 && (
                                        <>
                                            <div className="bg-orange-50 p-4 rounded-lg">
                                                <h4 className="font-bold text-orange-800 mb-2">Layout</h4>
                                                <p className="text-sm text-gray-600 mb-2">Size: {currentStepData.content.layout.size}</p>
                                                <ul className="text-sm text-gray-700 space-y-1">
                                                    {currentStepData.content.layout.structure.map((s, i) => (
                                                        <li key={i}>‚Ä¢ {s}</li>
                                                    ))}
                                                </ul>
                                            </div>
                                            <div className="border rounded-lg p-4">
                                                <h4 className="font-bold mb-2">Pasos</h4>
                                                <ol className="text-sm text-gray-700 space-y-1">
                                                    {currentStepData.content.steps.map((s, i) => (
                                                        <li key={i}>{i+1}. {s}</li>
                                                    ))}
                                                </ol>
                                            </div>
                                            <div className="bg-blue-50 p-4 rounded-lg">
                                                <h4 className="font-bold text-blue-800 mb-2">Formatting</h4>
                                                <ul className="text-sm text-gray-700 space-y-1">
                                                    {currentStepData.content.formatting.map((f, i) => (
                                                        <li key={i}>‚Ä¢ {f}</li>
                                                    ))}
                                                </ul>
                                            </div>
                                        </>
                                    )}

                                    {currentStep === 9 && (
                                        <>
                                            <div className="border rounded-lg p-4">
                                                <h4 className="font-bold mb-2">Filtros</h4>
                                                <div className="space-y-2">
                                                    {currentStepData.content.filters.map((f, i) => (
                                                        <div key={i} className="bg-gray-50 p-3 rounded-lg">
                                                            <div className="font-medium">{f.name}</div>
                                                            <div className="text-sm text-gray-600">{f.type} ‚Üí {f.apply}</div>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                            <div className="border rounded-lg p-4">
                                                <h4 className="font-bold mb-2">Acciones</h4>
                                                <div className="space-y-2">
                                                    {currentStepData.content.actions.map((a, i) => (
                                                        <div key={i} className="bg-orange-50 p-3 rounded-lg">
                                                            <div className="font-medium">{a.name}</div>
                                                            <div className="text-sm text-gray-600">
                                                                {a.type}: {a.source} ‚Üí {a.target} (on {a.trigger})
                                                            </div>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        </>
                                    )}

                                    {currentStep === 10 && (
                                        <>
                                            <div className="space-y-4">
                                                {currentStepData.content.options.map((opt, i) => (
                                                    <div key={i} className="border rounded-lg p-4">
                                                        <h4 className="font-bold text-orange-700 mb-2">{opt.platform}</h4>
                                                        <div className="text-sm text-gray-700 mb-2">
                                                            <strong>Pasos:</strong> {opt.steps.join(' ‚Üí ')}
                                                        </div>
                                                        <div className="flex gap-4 text-sm">
                                                            <span className="text-green-600">‚úì {opt.pros}</span>
                                                            <span className="text-red-600">‚úó {opt.cons}</span>
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                            <div className="bg-green-100 border-2 border-green-500 p-4 rounded-lg">
                                                <h4 className="font-bold text-green-800">Entregable Final</h4>
                                                <p className="text-gray-700">{currentStepData.content.deliverable}</p>
                                            </div>
                                        </>
                                    )}
                                </div>

                                {/* Navigation */}
                                <div className="flex justify-between mt-8 pt-4 border-t">
                                    <button
                                        onClick={() => setCurrentStep(Math.max(1, currentStep - 1))}
                                        disabled={currentStep === 1}
                                        className={`px-4 py-2 rounded-lg ${
                                            currentStep === 1
                                                ? 'bg-gray-100 text-gray-400 cursor-not-allowed'
                                                : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                                        }`}
                                    >
                                        ‚Üê Anterior
                                    </button>

                                    <button
                                        onClick={() => {
                                            markCompleted(currentStep);
                                            if (currentStep < labSteps.length) {
                                                setCurrentStep(currentStep + 1);
                                            }
                                        }}
                                        className="bg-orange-500 text-white px-6 py-2 rounded-lg hover:bg-orange-600"
                                    >
                                        {currentStep === labSteps.length ? 'Completar Lab' : 'Marcar completado ‚Üí'}
                                    </button>
                                </div>
                            </div>

                            {/* Completion */}
                            {completedSteps.length === labSteps.length && (
                                <div className="mt-6 bg-green-100 border-2 border-green-500 p-6 rounded-xl text-center">
                                    <div className="text-4xl mb-2">üéâ</div>
                                    <h3 className="text-xl font-bold text-green-800 mb-2">Laboratorio Completado</h3>
                                    <p className="text-gray-700 mb-4">
                                        Has construido un dashboard interactivo profesional en Tableau.
                                    </p>
                                    <a href="ejercicio-individual.html" className="bg-violet-600 text-white px-6 py-2 rounded-lg hover:bg-violet-700 inline-block">
                                        Ejercicio Individual ‚Üí
                                    </a>
                                </div>
                            )}
                        </div>
                    </div>

                    {/* Footer */}
                    <div className="mt-8 text-center text-gray-500 text-sm">
                        <p>Sesion 11 - Laboratorio Tableau</p>
                        <p>ADEN University - Cuatrimestre I 2026</p>
                    </div>
                </div>
            );
        }

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
